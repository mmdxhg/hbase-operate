# Hbase-operate & Hbase的操作及命令

## 1.什么是Hbase

Hbase是一个分布式的、基于Hadoop的非关系型数据库。

非关系型数据库（NSQL）：NoSQL数据库又叫Not Only SQL ，意思是不仅仅是SQL。

非关系型数据库不同于传统的关系型数据库，它内部所存储的数据不需要严格遵守数据库的存储规则，也就是说不需要保证每一行的数据内容都一样。

**举个例子：**

1.常规的关系型数据中存储的数据内容如下

|          | id   | name | age  |
| :------: | ---- | ---- | ---- |
| column 1 | 1    | tom  | 13   |
| column 2 | 2    | cat  |      |
| column 3 | 3    | toms | 18   |

从上面的这个表格不难看出，关系型数据库的每一行都是严格对齐的，即使是有的行没有数据也不能完全空着，必须要用一些东西来填充。典型的关系型数据库就是Mysql数据库。



2.非关系型数据库中存储的数据内容如下

|          | row  |      |      |
| -------- | ---- | ---- | ---- |
| column 1 | 1    | tom  | 13   |
| column 2 | 2    | cat  |      |
| column 3 | 3    | toms | ros  |

在非关系型数据库中，虽然还是有行存在，但是每一行的每一列就没有了严格的要求，你可以在这一行当中的列中存储任何满足当前列要求的数据，不需要再遵守行列对称的表格状的要求。也就是说没有的数据可以空着了，无需任何内容再对其进行填充。

第一行当中可以存储：编号、姓名、年龄

第二行当中可以存储：编号、姓名

第三行当中可以存储：编号、姓名、配偶



## 2.Hbase的基本概念

在Hbase当中，有着一些类似于关系型数据库、但是又不同于关系型数据库的概念，这些概念的内容必须要牢牢记住。

## 2.1 命名空间 NameSpace

Hbase当中的一个个的命名空间就好像是Mysql数据库中的一个个库，是用来进行数据隔离的一种手段。

举个例子：如果一个Hbase数据库当中要保存电商业务的数据和医疗业务的数据，那么这个时候就可以通过NameSpace来对这两种区域的数据进行隔离。

## 2.2 数据表Table

Hbase中的数据表的概念比较抽象，它的结构不是由多个列组成的而是由多个列族组成的。一个或者多个列族才组成了完成的Hbase数据表。

## 2.3 列族 Column Family

列族是Hbase当中非常重要的一个概念，因为Hbase当中数据的存储都是基于列族来完成的定义的，无论是数据内容压缩方式还是数据的存储规则都是根据列族展开的。

## 2.4 数据存储 Region

在Hbase当中数据表Table用来表示数据的存储内容，比如所电商数据的订单表（order）中的所有数据都是属于这个order表的，它们都是订单数据。但这只是表象，实际上Hbase底层负责存储数据的东西就是这个Region，一个表中数据的多少可以决定这个表中的数据是由几个Region构成的。换句话来说，如果数据量较少那么这个表中的数据就都属于一个Region，但是如果一个表中的数据量超大，那么这个表中的数据就可以分为多个Region来存储。

## 2.5 列族与Region共同决定了Hbase当中数据的存储

从2.3列族的概念可以看出Hbase当中的数据存储都是由列族来定义完成的，2.4则表明了Hbase底层的数据存储是由Region来完成的。这也就不难看出，Hbase中底层保存数据的样子就是如下图所示。



一个列族中的数据会被保存在一起，不同列族的数据可能会被发配到不同的服务器上存储。Region默认情况下不会被切割，但是如果数据量特别大，那么在进行负载均衡的时候这个Region会被移动到其他服务器，并且也会被切割。但是值得注意的是：Region不会跨服务器。

## 2.6 数据行键 RowKey

行键是用来表示Hbase中一行数据的唯一的标识，它在概念上要比关系型数据库的主键要明了的多。除了唯一标识之外，行键还是Hbase的唯一的排序依赖，也就是说它能左右数据在表中的排列方式（按字典顺序进行排序）。如果在进行数据插入的时候键入了同样的主键，那么老数据会被新数据所替换，但是老数据并不会丢失。

### 2.7 列限定符 Comlun Qualifier

多个列可以组成一个行，Hbase在定义某一个数据的时候要使用 列族:列限定符 的方式来确定某一个数据。列可以随便定义，一个表中的列没有限制，可以随意定义。

### 2.8 单元格Cell

在2.6中表明了如果一个行键被重复使用，老数据会被新数据顶掉。但这个顶掉不是把老数据顶没了，而是顶后面去了。特别像拍照的时候摄像师只照C位，新来的数据成了C位之后老数据就不会被摄像机拍下来了。但也说名了，老数据还是存在的只不过是从明面上看这个数据看不到了而已。

Cell还是Hbase存储数据的最基本的单元。

### 2.9 时间戳 TimeStamp

在2.8中说了，新的数据把老数据给顶掉了，但是没顶死。那么怎么才能重新看到这个老数据呢？这个时候可以通过指定时间戳的方式来查看。这个时间戳可以是时间，也可以是任何其他的什么东西。

## 3.简单的入门Hbase（用实际例子展示）





